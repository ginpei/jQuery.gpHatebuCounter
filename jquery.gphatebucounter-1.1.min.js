/**
 * jQuery.gpHatebuCounter 1.1
 * https://ginpen.com/jquery/gphatebucounter/
 * https://github.com/ginpei/jQuery.gpHatebuCounter
 *
 * Copyright (c) 2011 Takanashi Ginpei
 * https://ginpen.com
 *
 * Released under the MIT License.
 * https://www.opensource.org/licenses/mit-license.php
 */
(function($){try{if(window.com.ginpen.gpHatebuCounter){return}}catch(e){}if(!window.com){window.com={}}if(!com.ginpen){com.ginpen={}}var gpHatebuCounter=com.ginpen.gpHatebuCounter={VERSION:"1.0",DEFAULT:{before:false,outside:false,link:true,size:""},mergeSettings:function(settings){return $.extend({},this.DEFAULT,settings)},exec:function($el,settings){if(!this._isTarget($el)){return null}var $hatebu=this.build($el,settings);if(this._isBeOutside(settings)){if(this._isBeBefore(settings)){$el.before($hatebu)}else{$el.after($hatebu)}}else{if(this._isBeBefore(settings)){$el.prepend($hatebu)}else{$el.append($hatebu)}}return $hatebu},_isTarget:function($el){return $el.prop("tagName")&&$el.prop("tagName").toLowerCase()=="a"&&!!$el.prop("href")&&!$el.hasClass("gphatebucounter-ignore")},_getTargetUrl:function($el){return $el.prop("href").replace(/#/g,"%23")},_getSize:function(settings){var size=(settings||{}).size;if(size=="large"||size=="small"){return size}else{return""}},_isBeLinked:function(settings){settings=settings||{};if(!("link"in settings)){settings.link=gpHatebuCounter.DEFAULT.link}return!!settings.link},_isBeOutside:function(settings){if(this._isBeLinked(settings)){return true}settings=settings||{};if(!("outside"in settings)){settings.outside=gpHatebuCounter.DEFAULT.outside}return!!settings.outside},_isBeBefore:function(settings){settings=settings||{};if(!("before"in settings)){settings.before=gpHatebuCounter.DEFAULT.before}return!!settings.before},build:function($el,settings){var $img=this._buildImg($el,settings);var $hatebu;if(this._isBeLinked(settings)){var $link=this._buildLink($el,settings);$hatebu=$link.append($img)}else{$hatebu=$img}$hatebu.addClass("gphatebucounter");return $hatebu},_buildImg:function($el,settings){var url=this._getImageUrl($el,settings);return $("<img />").attr("src",url).css("border-width","0px")},_getImageUrl:function($el,settings){var size=this._getSize(settings);var targetUrl=this._getTargetUrl($el);return["https://b.hatena.ne.jp/entry/image/",size?size+"/":"",targetUrl].join("")},_buildLink:function($el,settings){var url=this._getLinkUrl($el,settings);return $("<a />").attr("href",url)},_getLinkUrl:function($el,settings){var targetUrl=this._getTargetUrl($el);return"https://b.hatena.ne.jp/entry/"+targetUrl},banpei:null};$.fn.gpHatebuCounter=function(settings){settings=gpHatebuCounter.mergeSettings(settings);return this.each(function(i,el){gpHatebuCounter.exec($(el),settings)})}})(jQuery);
