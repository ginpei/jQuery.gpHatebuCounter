/**
 * jQuery.gpHatebuCounter 1.0
 * http://ginpen.com/jquery/gphatebucounter/
 * https://github.com/ginpei/jQuery.gpHatebuCounter
 *
 * Copyright (c) 2011 Takanashi Ginpei
 * http://ginpen.com
 *
 * Released under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(b){try{if(window.com.ginpen.gpHatebuCounter){return}}catch(c){}if(!window.com){window.com={}}if(!com.ginpen){com.ginpen={}}var a=com.ginpen.gpHatebuCounter={VERSION:"1.0",DEFAULT:{before:false,outside:false,link:true,size:""},mergeSettings:function(d){return b.extend({},this.DEFAULT,d)},exec:function(d,e){if(!this._isTarget(d)){return null}var f=this.build(d,e);if(this._isBeOutside(e)){if(this._isBeBefore(e)){d.before(f)}else{d.after(f)}}else{if(this._isBeBefore(e)){d.prepend(f)}else{d.append(f)}}return f},_isTarget:function(d){return(d.prop("tagName")&&d.prop("tagName").toLowerCase()=="a"&&!!d.prop("href")&&!d.hasClass("gphatebucounter-ignore"))},_getTargetUrl:function(d){return d.prop("href").replace(/#/g,"%23")},_getSize:function(e){var d=(e||{}).size;if(d=="large"||d=="small"){return d}else{return""}},_isBeLinked:function(d){d=d||{};if(!("link" in d)){d.link=a.DEFAULT.link}return !!d.link},_isBeOutside:function(d){if(this._isBeLinked(d)){return true}d=d||{};if(!("outside" in d)){d.outside=a.DEFAULT.outside}return !!d.outside},_isBeBefore:function(d){d=d||{};if(!("before" in d)){d.before=a.DEFAULT.before}return !!d.before},build:function(f,g){var e=this._buildImg(f,g);var h;if(this._isBeLinked(g)){var d=this._buildLink(f,g);h=d.append(e)}else{h=e}h.addClass("gphatebucounter");return h},_buildImg:function(e,f){var d=this._getImageUrl(e,f);return b("<img />").attr("src",d).css("border-width","0px")},_getImageUrl:function(e,f){var d=this._getSize(f);var g=this._getTargetUrl(e);return["http://b.hatena.ne.jp/entry/image/",(d?d+"/":""),g].join("")},_buildLink:function(e,f){var d=this._getLinkUrl(e,f);return b("<a />").attr("href",d)},_getLinkUrl:function(d,e){var f=this._getTargetUrl(d);return"http://b.hatena.ne.jp/entry/"+f},banpei:null};b.fn.gpHatebuCounter=function(d){d=a.mergeSettings(d);return this.each(function(e,f){a.exec(b(f),d)})}}(jQuery));
